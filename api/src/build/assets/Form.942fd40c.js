var j=Object.defineProperty,k=Object.defineProperties;var C=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var f=(a,c,s)=>c in a?j(a,c,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[c]=s,x=(a,c)=>{for(var s in c||(c={}))F.call(c,s)&&f(a,s,c[s]);if(h)for(var s of h(c))S.call(c,s)&&f(a,s,c[s]);return a},g=(a,c)=>k(a,C(c));import{r as d,t as n,L as E}from"./vendor.b272e12a.js";import{c as I,u as w,a as t,f as _,j as l,i as p}from"./index.eb6b2ee8.js";import{v as b}from"./vacancies.service.c1555ea0.js";const q={folio:"",vacante:"",descripcion:"",ubicacion:"",fecha_expira:"",status:""},A=()=>{const[a,c]=d.exports.useState(q),{verifySession:s}=I(),[u,y]=d.exports.useState(!1),i=(e,r)=>c(g(x({},a),{[e]:r})),{navigate:o,params:m,location:N}=w(),V=async e=>{if(e.preventDefault(),u){const r=await s(()=>b.Update(a,m.id));if(!r.status)return n.error(r.statusText);if(a.status==="Cerrada"){n.success("Vacante editada, puede abrirla cuando requiera su publicacion "),o("/company/jobbank/");return}n.success("Vacante editada y publicada"),o("/company/jobbank/")}else{const r=await s(()=>b.Save(a));if(!r.status)return n.error(r.statusText);if(a.status==="Cerrada"){n.success("Vacante creada, puede abrirla cuando requiera su publicacion "),o("/company/jobbank/");return}n.success("Vacante creada y publicada"),o("/company/jobbank/")}},v=d.exports.useCallback(async()=>{const e=await s(()=>b.GetOne(m.id));if(!e.folio){n.error("Este registro no existe"),o("/company/jobbank/");return}delete e.fk_empresa,c(e)},[m.id]);return d.exports.useEffect(()=>{N.pathname.includes("edit")&&(v(),y(!0))},[v]),t(_,{title:u?"Editar vacante":"Nueva vacante",children:l("form",{onSubmit:V,children:[t("div",{className:"col-3 mx-auto",children:t(p,{inputId:"txtFolio",placeholder:"Folio",disabled:u,setValue:e=>i("folio",Number(e.target.value)?parseInt(e.target.value):0),value:a.folio})}),t("div",{className:"col-10 mx-auto",children:t(p,{inputId:"txtTitulo",placeholder:"Vacante",setValue:e=>i("vacante",e.target.value),value:a.vacante})}),l("div",{className:"form-group",children:[t("textarea",{placeholder:"Requerimientos",className:"form-control",rows:"10",onChange:e=>i("descripcion",e.target.value),value:a.descripcion}),l("div",{className:"row mt-3",children:[t("div",{className:"col-6",children:t(p,{inputId:"txtUbicacion",placeholder:"Ubicacion",setValue:e=>i("ubicacion",e.target.value),value:a.ubicacion})}),t("div",{className:"col-6",children:t(p,{inputId:"txtExpiracion",placeholder:"Fecha de expiracion",type:"date",setValue:e=>i("fecha_expira",e.target.value),value:a.fecha_expira})})]})]}),t("div",{className:"col-6 mx-auto",children:l("select",{className:"form-control form-select mb-3",style:{height:"47px"},onChange:e=>i("status",e.target.value),value:a.status,children:[t("option",{value:"",children:"Estatus (Seleccione una opci\xF3n)"}),t("option",{value:"Abierta",children:"Abierta"}),t("option",{value:"Cerrada",children:"Cerrada"})]})}),l("div",{className:"d-flex justify-content-center",children:[t("button",{className:"btn btn-primary mr-2",children:u?"Guardar cambios":"Guardar"}),t(E,{to:"/company/jobbank/",className:"btn btn-danger",children:"Cancelar"})]})]})})};export{A as F};
