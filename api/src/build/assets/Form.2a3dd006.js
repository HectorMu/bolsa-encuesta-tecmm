import{r as o,t as s}from"./vendor.b272e12a.js";import{e as F,c as y,u as C,a as g,f as S,R as v,E as w}from"./index.eb6b2ee8.js";import{c as u}from"./companies.service.d8cc47ff.js";const P=()=>{const{form:n,setForm:p,handleChange:h}=F(w),{verifySession:i}=y(),[c,d]=o.exports.useState(!1),[x,l]=o.exports.useState(!1),{location:e,navigate:a,params:m}=C(),f=o.exports.useCallback(async()=>{const r=await i(()=>u.GetOne(m.id));if(!r.id){a("/companies"),s.error("Este registro no existe.");return}p(r)},[m.id,a]),E=async r=>{if(r.preventDefault(),c){const t=await i(()=>u.Update(n,m.id));if(!t.status)return s.error(t.statusText);s.success("Empresa editada correctamente"),a("/companies")}else{const t=await i(()=>u.Save(n));if(!t.status)return s.error(t.statusText);s.success("Empresa registrada correctamente"),a("/companies")}};return o.exports.useEffect(()=>{if(e.state!==null&&p(e.state),e.pathname.includes("edit")){f(),d(!0);return}l(!0),d(!1)},[e.pathname,f,e.state]),g(S,{title:c?"Editar empresa":"Registrar empresa",children:g(v,{handleSubmit:E,company:n,onEditing:c,onChangePassword:x,handleChange:h,toggleChangePassword:l})})};export{P as F};
